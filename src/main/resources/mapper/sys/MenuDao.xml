<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.njust.back_end.modules.sys.dao.MenuDao">
    <select id="queryListByParentIdAndUserId" resultType="edu.njust.back_end.modules.sys.entity.MenuEntity">
        select *
        from menu
        where parent_id = #{parentId}
          and type = 0
            and menu_id in
            (
                select menu_id
                from role_menu inner join
                    (select role_id
                    from role_user
                    where user_id = #{userId}) as ruri on ruri.role_id = role_menu.role_id
            )
        order by order_num
    </select>
</mapper>

